<div>

    <div *ngIf="isError; else noErrorBlock">
        <div class="container">
            <div class="row">
                <div class="col text-center alert alert-danger mt-5" role="alert">
                    No results found. Please enter valid Ticker
                </div>
            </div>
        </div>

    </div>
    <ng-template #noErrorBlock>
        <div *ngIf="isLoading" class="is-loading spinner" layout="row" layout-align="center center">
            <mat-spinner mode="indeterminate" diameter="60"></mat-spinner>
        </div>
        <ng-container *ngIf="!isLoading">
            <div class="container"> 
                <div class="row row1 align-items-center">
                    <div class="col">                  
                        {{ companyDetails[0].ticker }}
                    </div>
                    <div class="col align-end" [ngClass]="calculateClassesForPrice()" >
                        {{ companyPrice[0].last }}
                    </div>
                </div>
                <div class="row row2 align-items-center">
                    <div class="col">
                        {{ companyDetails[0].name }}
                    </div>
                    <div class="col align-end" [ngClass]="calculateClassesForPrice()">
                        <span *ngIf="isChangePos"> 
                            <svg width="0.8em" height="0.8em" viewBox="0 0 16 16" class="bi bi-caret-down-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                <path d="M7.247 4.86l-4.796 5.481c-.566.647-.106 1.659.753 1.659h9.592a1 1 0 0 0 .753-1.659l-4.796-5.48a1 1 0 0 0-1.506 0z"/>
                            </svg>
                        </span>
                        <span *ngIf="isChangeNeg">
                            <svg width="0.8em" height="0.8em" viewBox="0 0 16 16" class="bi bi-caret-down-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                <path d="M7.247 11.14L2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"/>
                            </svg>
                        </span>
                        <span> {{ companyPrice[0].change }} ({{ companyPrice[0].perChange }} &#37;) </span>
                    </div>
                </div>
                <div class="row row3 align-items-center">
                    <div class="col">
                        {{ companyDetails[0].exchangeCode }}
                    </div>
                    <div class="col align-end">
                        {{ companyPrice[0].currDateStr }}
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <button class='btn btn-success'> Buy</button>
                    </div>
                </div>
                <div class="row">
                    <div class="col market-status" >
                        <div *ngIf="companyPrice[0].isMarketOpen; else marketClosed">
                            <span class="market-open"> Market is Open </span>
                        </div>
                        <ng-template #marketClosed>
                            <span class="market-closed">Market closed on {{ companyPrice[0].dataDateStr }}</span>
                        </ng-template>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <mat-tab-group mat-align-tabs="center" mat-stretch-tabs>
                            <mat-tab label="Summary">
                                <div class="container">
                                    <div class="row">
                                        <div class="col pt-4">
                                            <!-- <table class="">
                                                <tbody>
                                                  <tr>
                                                    <td>High Price</td>
                                                    <td colspan="4">{{ companyPrice[0].high }}</td>
                                                    <td>Mid Price:</td>
                                                    <td>{{ companyPrice[0].mid }}</td>
                                                  </tr>
                                                  <tr>
                                                    <td>Low Price:</td>
                                                    <td colspan="4">{{ companyPrice[0].low }}</td>
                                                    <td>Ask Price:</td>
                                                    <td>{{ companyPrice[0].askPrice }}</td>
                                                  </tr>
                                                  <tr>
                                                    <td>Open Price:</td>
                                                    <td>{{ companyPrice[0].low }}</td>
                                                    <td colspan="4">Ask Size:</td>
                                                    <td>{{ companyPrice[0].askSize }}</td>
                                                  </tr>
                                                  <tr>
                                                    <td>Prev. Close: </td>
                                                    <td colspan="4">{{ companyPrice[0].prevClose }}</td>
                                                    <td>Bid Price:</td>
                                                    <td>{{ companyPrice[0].bidSize }}</td>
                                                  </tr>
                                                </tbody>
                                              </table> -->
                                              
                                            <div class="row">
                                                <div class="col bg-success">
                                                    High Price:
                                                </div>
                                                <div class="col">
                                                    {{ companyPrice[0].high }}
                                                </div>
                                                <div class="col">
                                                    Mid Price:
                                                </div>
                                                <div class="col">
                                                    {{ companyPrice[0].mid }}
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col">
                                                    Low Price: 
                                                </div>
                                                <div class="col">
                                                    {{ companyPrice[0].low }}
                                                </div>
                                                <div class="col">
                                                    Ask Price:
                                                </div>
                                                <div class="col">
                                                    {{ companyPrice[0].askPrice }}
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col">
                                                    Open Price: 
                                                </div>
                                                <div class="col">
                                                    {{ companyPrice[0].open }}
                                                </div>
                                                <div class="col">
                                                    Ask Size:
                                                </div>
                                                <div class="col">
                                                    {{ companyPrice[0].askSize }}
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col">
                                                    Prev. Close: 
                                                </div>
                                                <div class="col">
                                                    {{ companyPrice[0].prevClose }}
                                                </div>
                                                <div class="col">
                                                    Bid Price:
                                                </div>
                                                <div class="col">
                                                    {{ companyPrice[0].bidPrice }}
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col">
                                                    Volume: 
                                                </div>
                                                <div class="col">
                                                    {{ companyPrice[0].volume }}
                                                </div>
                                                <div class="col">
                                                    Bid Size:
                                                </div>
                                                <div class="col">
                                                    {{ companyPrice[0].bidSize }}
                                                </div>
                                            </div>
                                            <div class="row price-details">
                                                <div class='col bg-warning'>
                                                    <h2>Company's Description</h2>
    
                                                </div>
                                                <!-- <h2 class="col bg-success">
                                                    Company's Description
                                                </h2> -->
                                            </div>
                                            <div class="row">
                                                <div class="col">
                                                    Start Date: {{ companyDetails[0].startDate }}
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col">
                                                    {{ companyDetails[0].description }}
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col">
                                            <highcharts-chart 
                                                [Highcharts]="HighchartsDaily"
                                                [options]="chartOptionsDaily"
                                                [constructorType]="'stockChart'" 
     
                                                style="width: 100%; height: 400px; display: block;"
                                            ></highcharts-chart>
                                        </div>
                                    </div>
                                </div>
                            </mat-tab>
                            <mat-tab label="Top News"> 
                                <app-news-modal [companyNews]="companyNews" ></app-news-modal>
                            </mat-tab>
                            <mat-tab label="Charts">
                                <div class="container">
                                    <div class="row">
                                        <div class="col">
                                            <highcharts-chart 
                                            [Highcharts]="HighchartsHist"
                                            [options]="chartOptionsHist"
                                            [constructorType]="'stockChart'" 
                                            [(update)]="updateFromInput"
                
                                            style="width: 100%; height:80vh; display: block; padding: 1em;"
                                            ></highcharts-chart>
                                        </div>
                                    </div>
                                </div>
    
    
                            </mat-tab>
                        </mat-tab-group>
                    </div>
                </div>
            </div>
        </ng-container>
    </ng-template>    
</div>